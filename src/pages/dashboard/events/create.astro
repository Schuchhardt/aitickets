---
import DashboardLayout from "../../../layouts/DashboardLayout.astro";
import CreateEventForm from "../../../components/events/CreateEventForm.vue";
import { createSupabaseServerClient } from "../../../lib/supabaseServer";

// Fetch venues for the form selection
const supabase = createSupabaseServerClient(Astro);
const { data: venues } = await supabase
  .from("venues")
  .select("id, name, city")
  .order("name");
---

<DashboardLayout title="Crear Evento">
  <div class="max-w-5xl mx-auto">
    <div class="mb-8">
      <h1 class="text-3xl font-bold font-[Unbounded]">Crear Nuevo Evento</h1>
      <p class="text-gray-500 mt-2">
        Configura la informaci√≥n, funciones y entradas de tu evento.
      </p>
    </div>

    <!-- The Wizard Form -->
    <CreateEventForm client:only="vue" :initialVenues="venues || []" />
  </div>
</DashboardLayout>
